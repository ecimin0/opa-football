{% extends 'base.html' %}
{% block header %}
{% endblock %}
{% block content %}

<body>
    <div class="container center">
        <h2 class="cfg-reg-yellow cfg-title">Regolazo</h2>
        <form class="cfg-reg-yellow">

            <div class="mb-3 form-group">
                <label for="mainTeamInput" class="form-label">main team</label>
                <select class="form-control" id="mainTeamInput" name="main_team">
                    <option value="none" selected disabled hidden>select team</option>
                    {% for t in teams %}
                    <option value="{{t.name}}">{{t.name}}</option>
                    {% endfor %}
                </select>
            </div>


            <div class="mb-3 form-group" style="display:none">
                <label for="mainTeamOutput" class="form-label">fixture</label>
                <!-- <input type="text" class="form-control" id="mainTeamOutput"> -->
                <select class="form-control" id="mainTeamOutput">
                    <option value="none" selected disabled hidden>select fixture</option>
                    <!-- {% for f in fixtures %}
                    <option value="{{fixture.home}} - {{fixture.away}}">{{fixture.home}} v {{fixture.away}}</option>
                    {% endfor %} -->
                    <!-- <option value=data></option> -->
                </select>
            </div>
        </form>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
        crossorigin="anonymous"></script>
</body>


<script>
    const input = document.getElementById('mainTeamInput');

    input.addEventListener('input', updateValue);

    async function updateValue(e) {
        const output = document.getElementById('mainTeamOutput');
        var val = "";

        if (e.target.value == "") {
            output.parentElement.style.display = "none";
        } else {
            await fetch('/api/fixtures', { method: "POST" })
                .then((response) => response.text())
                .then((data) => {
                    // console.log(data);
                    // output.value = data;
                    output.parentElement.style.display = "block";
                    console.log(data);
                    document.getElementById('mainTeamOutput').value=data; 
                }).catch((err) => alert(err));
        }
    }
</script>








<!-- <body>
    <h1 class="cfg-reg-yellow">OPA/Rego Football Prediction League Scoring Calculator</h1>
    <div class="row">
        <div class="column" style="padding-left: 20px;">
            <h2 class="cfg-reg-yellow">select a team to begin:</h2>
            <div class="form-group">
                <label for="exampleFormControlSelect1">main team</label>
                <select class="form-control" id="exampleFormControlSelect1">
                    {% for p in players %}
                        <option value="{{p.player_name}}">{{p.player_name}}</option>
                    {% endfor %}
                </select>
            </div> -->



<!-- <form action="/" method="post">
                <h1 class="cfg-reg-yellow">input</h1>
                <div class="field">
                    <label for="name">home team:</label>
                    <input type="text" id="name" name="home_team" placeholder="home team name" value="arsenal" />
                    <small></small>
                </div>
                <div class="field">
                    <label for="name">home goals:</label>
                    <input type="text" id="name" name="home_goals" placeholder="home team goals" value="4" />
                    <small></small>
                </div>
                <div class="field">
                    <label for="name">away team:</label>
                    <input type="text" id="name" name="away_team" placeholder="away team name" value="leicester" />
                    <small></small>
                </div>
                <div class="field">
                    <label for="name">away goals:</label>
                    <input type="text" id="name" name="away_goals" placeholder="away team goals" value="" />
                    <small></small>
                </div>
                <div class="field">
                <label for="scorers">choose scorer(s):</label>
                <select name="players" id="players" multiple size="8">
                    {% for p in players %}
                        <option value="{{p.player_name}}">{{p.player_name}}</option>
                    {% endfor %}
                </select>
                </div>
                <br><br>
                <input type="submit" value="does nothing">
            </form> -->



<!-- </div>
    </div>
</body> -->
{% endblock %}